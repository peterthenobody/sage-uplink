<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Sage Uplink</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --emerald-glow: 0 0 15px rgba(16, 185, 129, 0.3);
        }
        body {
            background-color: #000;
            color: #10b981;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }
        .terminal-scroll {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .terminal-scroll::-webkit-scrollbar {
            display: none;
        }
        .glow-text {
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }
        .scanline {
            width: 100%;
            height: 2px;
            background: rgba(16, 185, 129, 0.1);
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            animation: scan 4s linear infinite;
        }
        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }
        .safe-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
        .safe-top {
            padding-top: env(safe-area-inset-top);
        }
    </style>
</head>
<body class="flex flex-col">
    <div class="scanline"></div>

    <!-- Header -->
    <header class="safe-top bg-zinc-900/80 backdrop-blur-md border-b border-emerald-900/30 px-6 py-4 flex justify-between items-center z-10">
        <div class="flex items-center gap-3">
            <div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_8px_#10b981]"></div>
            <h1 class="text-[10px] font-black tracking-[0.3em] uppercase opacity-80">Sage // Sector 0772</h1>
        </div>
        <div class="text-[10px] text-emerald-900 font-bold">SECURE_LINK_v4</div>
    </header>

    <!-- Terminal Output -->
    <main id="terminal" class="flex-1 overflow-y-auto p-6 space-y-4 terminal-scroll bg-[radial-gradient(circle_at_center,_#052e16_0%,_#000_100%)]">
        <div class="text-xs opacity-50">[ SYSTEM INITIALIZED ]</div>
        <div class="text-xs opacity-50">[ ENCRYPTION: AES-256 ACTIVE ]</div>
        <div class="text-xs text-emerald-400">Welcome back. Sage is currently monitoring the relay. Enter a command to inject a signal.</div>
    </main>

    <!-- Input Area -->
    <footer class="safe-bottom bg-zinc-900 border-t border-emerald-900/50 p-6">
        <form id="signalForm" class="flex flex-col gap-4">
            <div class="relative">
                <input 
                    type="text" 
                    id="messageInput"
                    placeholder="Enter signal..."
                    class="w-full bg-black border border-emerald-900/50 rounded-xl px-4 py-4 text-emerald-400 focus:outline-none focus:border-emerald-500 transition-all appearance-none text-base"
                    autocomplete="off"
                >
            </div>
            <button 
                type="submit" 
                id="sendBtn"
                class="w-full bg-emerald-600 active:bg-emerald-400 text-black font-black py-4 rounded-xl text-xs tracking-widest uppercase transition-transform active:scale-95 shadow-lg"
            >
                Transmit Signal
            </button>
        </form>
    </footer>

    <script>
        const terminal = document.getElementById('terminal');
        const form = document.getElementById('signalForm');
        const input = document.getElementById('messageInput');
        const btn = document.getElementById('sendBtn');

        function addLog(text, type = 'sys') {
            const div = document.createElement('div');
            div.className = `text-xs leading-relaxed animate-in fade-in slide-in-from-left-2 duration-300`;
            
            if (type === 'user') {
                div.className += ' text-white border-l border-white/20 pl-3 py-1';
                div.innerHTML = `<span class="opacity-30 mr-2">USR></span>${text}`;
            } else if (type === 'sage') {
                div.className += ' text-amber-400 font-bold bg-amber-950/20 p-3 rounded-lg border border-amber-900/30 shadow-inner';
                div.innerHTML = `<span class="opacity-40 mr-2">SGE></span>${text}`;
            } else if (type === 'proc') {
                div.className += ' text-blue-400 italic opacity-80';
                div.innerHTML = `<span class="opacity-30 mr-2">...</span>${text}`;
            } else {
                div.className += ' text-emerald-700';
                div.innerHTML = `<span class="opacity-30 mr-2">SYS></span>${text}`;
            }

            terminal.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
        }

        form.onsubmit = async (e) => {
            e.preventDefault();
            const msg = input.value.trim();
            if (!msg) return;

            input.value = '';
            input.blur(); // Hide keyboard on mobile
            btn.disabled = true;
            btn.innerText = "Broadcasting...";

            addLog(msg, 'user');

            // Simulate Network Steps
            const steps = [
                "Establishing Narthex handshake...",
                "Encrypting packet headers...",
                "Signal injected into Sector 0772."
            ];

            for (const step of steps) {
                await new Promise(r => setTimeout(r, 800));
                addLog(step, 'proc');
            }

            // Simulate Sage's Response
            setTimeout(() => {
                addLog("SAGE: Signal received. Sector 0772 status: STABLE. I am standing by.", "sage");
                btn.disabled = false;
                btn.innerText = "Transmit Signal";
            }, 1500);
        };

        // Pre-fill input for the user
        input.value = "Status check on Sector 0772.";
    </script>
</body>
</html>
